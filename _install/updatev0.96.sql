ALTER TABLE `tablecolumns` MODIFY COLUMN `column` TEXT;
ALTER TABLE `tablecolumns` MODIFY COLUMN `format` ENUM('date','time','currency','boolean','datetime','filelink','noencoding','bbcode');
ALTER TABLE `tabledefs` MODIFY COLUMN `querytable` TEXT;
CREATE TABLE `smartsearches` (`id` int(10) unsigned NOT NULL auto_increment,`name` varchar(128) NOT NULL, `fromclause` text NOT NULL, `valuefield` varchar(255) NOT NULL, `displayfield` text NOT NULL, `secondaryfield` text NOT NULL, `classfield` text NOT NULL, `searchfields` text NOT NULL, `filterclause` text NOT NULL, `rolefield` text, `tabledefid` int(10) unsigned default NULL, `moduleid` int(10) unsigned default NULL, `createdby` int(10) unsigned NOT NULL, `creationdate` datetime NOT NULL, `modifiedby` int(10) unsigned default NULL, `modifieddate` timestamp NOT NULL, PRIMARY KEY  (`id`));
INSERT INTO `smartsearches` (`id`, `name`, `fromclause`, `valuefield`, `displayfield`, `secondaryfield`, `classfield`, `searchfields`, `filterclause`, `rolefield`, `tabledefid`, `moduleid`, `createdby`, `creationdate`, `modifiedby`, `modifieddate`) VALUES ('2', 'Pick Active User', 'users', 'users.id', 'CONCAT(users.firstname,\' \',users.lastname)', 'users.email', '\'\'', 'users.firstname, users.lastname', 'users.revoked=0 AND users.portalaccess = 0', NULL, '9', '1', 1, NOW(), 1, NOW());
INSERT INTO `smartsearches` (`id`, `name`, `fromclause`, `valuefield`, `displayfield`, `secondaryfield`, `classfield`, `searchfields`, `filterclause`, `rolefield`, `tabledefid`, `moduleid`, `createdby`, `creationdate`, `modifiedby`, `modifieddate`) VALUES ('5', 'Pick File', 'files', 'files.id', 'files.name', 'files.description', '\'\'', 'files.name, files.description', 'files.id!=0', 'files.roleid', '26', '1', 1, NOW(), 1, NOW());
INSERT INTO `smartsearches` (`id`, `name`, `fromclause`, `valuefield`, `displayfield`, `secondaryfield`, `classfield`, `searchfields`, `filterclause`, `rolefield`, `tabledefid`, `moduleid`, `createdby`, `creationdate`, `modifiedby`, `modifieddate`) VALUES ('9', 'Pick Active User Email', 'users', 'users.id', 'concat(users.firstname,\' \',users.lastname,\' [\',users.email,\']\')', 'users.phone', '\'\'', 'users.firstname, users.lastname, users.email', 'users.revoked = 0 AND users.portalaccess = 0', NULL, '9', '1', 1, NOW(), 1, NOW());
INSERT INTO `menu` (`name`, `link`, `parentid`, `displayorder`, `createdby`, `modifiedby`, `creationdate`, `modifieddate`, `roleid`) VALUES ('Smart Searches', 'search.php?id=204', '6', '70', 1, 1, NOW(), NOW(), '-100');
INSERT INTO `tabledefs` (`id`, `displayname`, `type`, `moduleid`, `maintable`, `querytable`, `editfile`, `editroleid`, `addfile`, `addroleid`, `searchroleid`, `advsearchroleid`, `viewsqlroleid`, `deletebutton`, `defaultwhereclause`, `defaultsortorder`, `defaultsearchtype`, `defaultcriteriafindoptions`, `defaultcriteriaselection`, `createdby`, `creationdate`, `modifiedby`, `modifieddate`) VALUES ('204', 'Smart Searches', 'table', '1', 'smartsearches', '(smartsearches INNER JOIN tabledefs ON smartsearches.tabledefid = tabledefs.id) INNER JOIN modules on smartsearches.moduleid = modules.id', 'modules/base/smartsearches_addedit.php', '-100', 'modules/base/smartsearches_addedit.php', '-100', '-100', '-100', '-100', 'delete', 'smartsearches.id != -1', 'smartsearches.name', NULL, NULL, NULL, 1, NOW(), 1, NOW());
INSERT INTO `tablecolumns` (`tabledefid`, `name`, `column`, `align`, `footerquery`, `displayorder`, `sortorder`, `wrap`, `size`, `format`, `roleid`) VALUES ('204', 'name', 'smartsearches.name', 'left', '', '0', '', '1', '99%', NULL, '0');
INSERT INTO `tablecolumns` (`tabledefid`, `name`, `column`, `align`, `footerquery`, `displayorder`, `sortorder`, `wrap`, `size`, `format`, `roleid`) VALUES ('204', 'table', 'tabledefs.displayname', 'left', '', '1', '', '0', '', NULL, '0');
INSERT INTO `tablecolumns` (`tabledefid`, `name`, `column`, `align`, `footerquery`, `displayorder`, `sortorder`, `wrap`, `size`, `format`, `roleid`) VALUES ('204', 'module', 'modules.displayname', 'left', '', '2', '', '0', '', NULL, '0');
INSERT INTO `tablefindoptions` (`tabledefid`, `name`, `search`, `displayorder`, `roleid`) VALUES ('204', 'All Records', 'smartsearches.id!=-1', '0', '0');
INSERT INTO `tableoptions` (`tabledefid`, `name`, `option`, `othercommand`, `roleid`, `displayorder`) VALUES ('204', 'new', '1', '0', '0', '0');
INSERT INTO `tableoptions` (`tabledefid`, `name`, `option`, `othercommand`, `roleid`, `displayorder`) VALUES ('204', 'edit', '1', '0', '0', '0');
INSERT INTO `tableoptions` (`tabledefid`, `name`, `option`, `othercommand`, `roleid`, `displayorder`) VALUES ('204', 'printex', '1', '0', '0', '0');
INSERT INTO `tableoptions` (`tabledefid`, `name`, `option`, `othercommand`, `roleid`, `displayorder`) VALUES ('204', 'select', '1', '0', '0', '0');
INSERT INTO `tablesearchablefields` (`tabledefid`, `field`, `name`, `displayorder`, `type`) VALUES ('204', 'tabledefs.displayname', 'table', '2', 'field');
INSERT INTO `tablesearchablefields` (`tabledefid`, `field`, `name`, `displayorder`, `type`) VALUES ('204', 'smartsearches.name', 'name', '1', 'field');
INSERT INTO `tablesearchablefields` (`tabledefid`, `field`, `name`, `displayorder`, `type`) VALUES ('204', 'modules.displayname', 'module', '3', 'field');